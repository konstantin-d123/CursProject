
# Техническое задание: Музыкальный плеер

**Студент:** [Ваше ФИО]

**Группа:** [Номер группы]

---

## 1. Описание проекта

### 1.1 Название системы
**Музыкальный плеер "AudioWave"**

### 1.2 Назначение
Система предназначена для организации и воспроизведения музыкальной коллекции пользователя. Позволяет импортировать аудиофайлы, создавать плейлисты, управлять воспроизведением, а также приобретать премиум-функции через систему оплаты.

---

## 2. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: Импорт музыкальных файлов
- **Описание:** Пользователь может добавлять аудиофайлы в библиотеку из локальной файловой системы. Система автоматически извлекает метаданные (название, исполнитель, альбом, длительность) и создает запись в базе данных.
- **Входные данные:** путь к аудиофайлу (форматы: MP3, WAV, FLAC)
- **Результат:** аудиотрек добавлен в библиотеку, метаданные сохранены в БД

#### Функция 2: Создание и управление плейлистами
- **Описание:** Пользователь может создавать именованные плейлисты, добавлять в них треки из библиотеки, изменять порядок воспроизведения и удалять плейлисты.
- **Входные данные:** название плейлиста, список выбранных треков
- **Результат:** создан новый плейлист с выбранными треками

#### Функция 3: Воспроизведение музыки
- **Описание:** Пользователь может воспроизводить отдельные треки или плейлисты, управлять воспроизведением (пауза, перемотка, громкость), переключаться между треками.
- **Входные данные:** выбранный трек или плейлист
- **Результат:** начало воспроизведения аудио с выбранными параметрами

#### Функция 4: Поиск и фильтрация
- **Описание:** Пользователь может искать треки по названию, исполнителю или альбому, а также фильтровать музыку по жанру, году выпуска или рейтингу.
- **Входные данные:** поисковый запрос, параметры фильтрации
- **Результат:** отфильтрованный список треков, соответствующих критериям

#### Функция 5: Управление библиотекой
- **Описание:** Пользователь может редактировать метаданные треков (название, исполнитель, жанр), оценивать треки, удалять треки из библиотеки.
- **Входные данные:** новые значения метаданных, рейтинг
- **Результат:** обновленная информация о треке в базе данных

#### Функция 6: Покупка премиум-подписки
- **Описание:** Пользователь может приобрести премиум-подписку для получения дополнительных функций: экспорт плейлистов, продвинутая аналитика прослушиваний, отсутствие рекламы. Выбирает тип подписки (месячная/годовая), вводит данные банковской карты.
- **Входные данные:** тип подписки, данные карты (номер, срок действия, CVV)
- **Результат:** платеж обработан, премиум-статус активирован, создана запись в БД

---

## 3. Структура базы данных

### Таблица 1: Tracks (Треки)

**Описание:** Хранит информацию о музыкальных треках

**Поля:**
- `Id` (int, PK) — уникальный идентификатор трека
- `Title` (string) — название трека
- `Artist` (string) — исполнитель
- `Album` (string) — альбом
- `Genre` (string) — жанр музыки
- `Duration` (TimeSpan) — длительность трека
- `FilePath` (string) — путь к файлу на диске
- `Year` (int?) — год выпуска (nullable)
- `Rating` (int?) — пользовательский рейтинг (1-5, nullable)
- `PlayCount` (int) — количество воспроизведений
- `AddedDate` (DateTime) — дата добавления в библиотеку

**Связи:**
- Связь один-ко-многим с таблицей `PlaylistTracks` (один трек может быть в нескольких плейлистах)

### Таблица 2: Playlists (Плейлисты)

**Описание:** Хранит информацию о пользовательских плейлистах

**Поля:**
- `Id` (int, PK) — уникальный идентификатор плейлиста
- `Name` (string) — название плейлиста
- `Description` (string?) — описание плейлиста (nullable)
- `CreatedDate` (DateTime) — дата создания
- `IsPublic` (bool) — флаг публичности плейлиста

**Связи:**
- Связь один-ко-многим с таблицей `PlaylistTracks` (один плейлист содержит много треков)

### Таблица 3: PlaylistTracks (Треки в плейлистах)

**Описание:** Связывает плейлисты и треки (связь многие-ко-многим)

**Поля:**
- `Id` (int, PK) — уникальный идентификатор связи
- `PlaylistId` (int, FK → Playlists.Id) — идентификатор плейлиста
- `TrackId` (int, FK → Tracks.Id) — идентификатор трека
- `Position` (int) — порядковый номер трека в плейлисте
- `AddedDate` (DateTime) — дата добавления трека в плейлист

**Связи:**
- `PlaylistId` → `Playlists.Id`
- `TrackId` → `Tracks.Id`

### Таблица 4: Subscriptions (Подписки)

**Описание:** Хранит информацию о премиум-подписках пользователей

**Поля:**
- `Id` (int, PK) — уникальный идентификатор подписки
- `UserId` (int, FK → Users.Id) — идентификатор пользователя
- `Type` (string) — тип подписки (Monthly/Yearly)
- `StartDate` (DateTime) — дата начала подписки
- `EndDate` (DateTime) — дата окончания подписки
- `Price` (decimal) — стоимость подписки
- `IsActive` (bool) — флаг активной подписки

**Связи:**
- `UserId` → `Users.Id`

### Таблица 5: Users (Пользователи)

**Описание:** Хранит информацию о пользователях приложения

**Поля:**
- `Id` (int, PK) — уникальный идентификатор пользователя
- `Username` (string) — имя пользователя
- `Email` (string) — электронная почта
- `RegistrationDate` (DateTime) — дата регистрации
- `HasPremium` (bool) — флаг премиум-статуса

---

## 4. Основные формы приложения

#### Форма 1: MainWindow (Главная форма)

**Назначение:** Основное окно приложения для навигации и управления музыкой

**Элементы управления:**
- TabControl — вкладки для разных разделов (Библиотека, Плейлисты, Поиск, Настройки)
- ListBox/DataGrid — отображение списка треков/плейлистов
- MediaElement — элемент для воспроизведения аудио
- Slider — регулятор громкости и прогресса воспроизведения
- TextBox (поиск) — поле для поиска музыки
- StatusBar — отображение статуса приложения и текущего трека

**Действия:**
- Кнопка "Добавить треки" — открывает диалог выбора файлов
- Кнопка "Создать плейлист" — открывает PlaylistEditWindow
- Кнопка "Воспроизвести" — начинает воспроизведение выбранного трека
- Кнопка "Купить премиум" — открывает PaymentWindow

#### Форма 2: TrackEditWindow (Редактирование трека)

**Назначение:** Редактирование метаданных музыкального трека

**Элементы управления:**
- TextBox (Title) — название трека
- TextBox (Artist) — исполнитель
- TextBox (Album) — альбом
- ComboBox (Genre) — выбор жанра из списка
- NumericUpDown (Year) — год выпуска
- RatingControl — установка рейтинга (1-5 звезд)
- TextBlock (FilePath) — отображение пути к файлу

**Действия:**
- Кнопка "Сохранить" — сохранение изменений
- Кнопка "Отмена" — закрытие формы без сохранения

#### Форма 3: PlaylistEditWindow (Редактирование плейлиста)

**Назначение:** Создание и редактирование плейлистов

**Элементы управления:**
- TextBox (Name) — название плейлиста
- TextBox (Description) — описание плейлиста
- CheckBox (IsPublic) — флаг публичности
- DataGrid (AvailableTracks) — список доступных треков
- DataGrid (PlaylistTracks) — список треков в плейлисте
- Button (AddTrack) — добавление трека в плейлист
- Button (RemoveTrack) — удаление трека из плейлиста

**Действия:**
- Кнопка "Сохранить" — сохранение плейлиста
- Кнопка "Отмена" — закрытие формы без сохранения

#### Форма 4: SearchWindow (Окно поиска)

**Назначение:** Расширенный поиск и фильтрация музыки

**Элементы управления:**
- TextBox (SearchQuery) — поле для поискового запроса
- ComboBox (GenreFilter) — фильтр по жанру
- ComboBox (YearFilter) — фильтр по году
- ComboBox (RatingFilter) — фильтр по рейтингу
- DataGrid (Results) — список найденных треков

**Действия:**
- Кнопка "Поиск" — выполнение поиска с текущими фильтрами
- Кнопка "Сбросить" — сброс всех фильтров

#### Форма 5: PaymentWindow (Форма оплаты)

**Назначение:** Оформление премиум-подписки

**Элементы управления:**
- ComboBox (SubscriptionType) — выбор типа подписки (Месячная/Годовая)
- TextBox (CardNumber) — ввод номера банковской карты
- TextBox (ExpiryDate) — ввод срока действия карты (MM/YY)
- TextBox (CVV) — ввод кода безопасности
- TextBlock (Amount) — отображение суммы к оплате
- TextBlock (Features) — список премиум-функций

**Действия:**
- Кнопка "Оплатить" — обработка платежа
- Кнопка "Отмена" — отмена операции

---

## 5. Схема переходов между формами

### Схема навигации

#### При запуске приложения
**Запуск** → `MainWindow` (главная форма с библиотекой треков)

#### Из MainWindow
**Вкладка "Библиотека":**
- Двойной клик по треку → начало воспроизведения
- Правый клик → контекстное меню → "Редактировать" → `TrackEditWindow`
- Кнопка "Добавить треки" → диалог выбора файлов → импорт в библиотеку

**Вкладка "Плейлисты":**
- Кнопка "Создать плейлист" → `PlaylistEditWindow` (режим создания)
- Двойной клик по плейлисту → `PlaylistEditWindow` (режим редактирования)
- Кнопка "Удалить плейлист" → диалог подтверждения → удаление

**Вкладка "Поиск":**
- Автоматически открывается `SearchWindow` внутри вкладки
- Результаты поиска можно добавлять в плейлисты двойным кликом

**Вкладка "Настройки":**
- Кнопка "Купить премиум" → `PaymentWindow`

#### Из TrackEditWindow
**Кнопка "Сохранить"** → сохранение изменений → возврат на `MainWindow` (обновить список треков)
**Кнопка "Отмена"** → возврат на `MainWindow` без сохранения

#### Из PlaylistEditWindow
**Кнопка "Сохранить"** → сохранение плейлиста → возврат на `MainWindow` (обновить список плейлистов)
**Кнопка "Отмена"** → возврат на `MainWindow` без сохранения

#### Из PaymentWindow
**Кнопка "Оплатить":**
- Успешная оплата → сообщение об успехе → возврат на `MainWindow` (активация премиума)
- Неудачная оплата → сообщение об ошибке → остаёмся на `PaymentWindow`
**Кнопка "Отмена"** → возврат на `MainWindow` без оплаты

```